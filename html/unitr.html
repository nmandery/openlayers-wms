
<!-- saved from url=(0048)http://amorphe-welt.de/openstreetmap/unikml.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <SCRIPT src="js/OpenLayers.js"></SCRIPT>
    <SCRIPT src="js/OpenStreetMap.js"></SCRIPT>
    <script src="../js/api.js"></script>

    <SCRIPT type="text/javascript">
        
        var map;

        function init(){

            // Karte (passend f√ºr OSM)
			map = new OpenLayers.WmsMap('map',
                    { maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                      numZoomLevels: 19,
                      maxResolution: 156543.0399,
                      units: 'm',
                      projection: new OpenLayers.Projection("EPSG:900913"),
                      displayProjection: new OpenLayers.Projection("EPSG:4326")
                    });

            // Mapnik und Osmarender als Kartenlayer
            var layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
			var layerTah = new OpenLayers.Layer.OSM.Osmarender("Tiles@Home");
			map.addLayers([layerMapnik,layerTah]);

            // Layer f√ºr die KML-Daten
            var kml = new OpenLayers.Layer.GML("Uni Campus I", "unitr.xml", 
               {
                format: OpenLayers.Format.KML, 
                formatOptions: {
                  extractStyles: false, 
                  extractAttributes: true
                },
				projection: map.displayProjection
               });

            map.addLayer(kml);
            
             // OSM-Karte mit lon/lat der Uni Trier (Campus I)
			var lonLat = new OpenLayers.LonLat(6.68749, 49.74624).transform(map.displayProjection,  map.projection);
    		map.setCenter (lonLat, 17); 

           
            /*
            // Events f√ºr die Objekte der KML-Daten
            kml.events.on({
                'featureselected': onFeatureSelect,
                'featureunselected': onFeatureUnselect
            });

            // Eventhandler (erzeugen f√ºr Layer KML, starten)
			var control = new OpenLayers.Control.SelectFeature(kml);
            map.addControl(control);
            control.activate();
            
            map.addControl(new OpenLayers.Control.LayerSwitcher());

            // wird beim Schlie√üen des Popups aufgerufen
            function onPopupClose(evt) {
                control.unselect(this.feature);
            }
            // wird beim anklicken des Objekts in der Karte aufgerufen
            function onFeatureSelect(evt) {
                feature = evt.feature;
                // popup ist ein AnchoredBubble in 120x16px
                popup = new OpenLayers.Popup.AnchoredBubble("featurePopup",
                                         feature.geometry.getBounds().getCenterLonLat(),
                                         new OpenLayers.Size(120,16),
                                         feature.attributes.name,
                                         null, true, onPopupClose);
                feature.popup = popup;
                popup.feature = feature;
                map.addPopup(popup);
            }
            // wird beim abw√§hlen des Objekts aufgerufen
            function onFeatureUnselect(evt) {
                feature = evt.feature;
                if (feature.popup) {
                    popup.feature = null;
                    map.removePopup(feature.popup);
                    feature.popup.destroy();
                    feature.popup = null;
                }
            }
            */
        }
    </SCRIPT>
    <TITLE>Uni Trier, Campus I - als Overlay ¸ber OSM</TITLE>
  <LINK rel="stylesheet" type="text/css" href="./unitr_files/style.css"></HEAD><BODY onload="init()">


  
 
<body onload="init();" style="padding:0px; margin:0px; width:500px; height:500px; background:#ffffffff;">
    <div style="margin:0px; padding:0px; background:#ffffffff;" id="map"></div>
  <!--<div style="width:100%; height:100%; margin:0px; padding:0px; background:#00ff00;" id="map"></div>
  -->
</body>



</BODY></HTML>
